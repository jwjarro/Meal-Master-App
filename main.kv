#:kivy 2.3.1

<CustomButton@Button>:
    font_size: 60
    text_size: (self.width, None)
    bold: True
    halign: 'center'
    background_normal: ''

<CustomInput@TextInput>:
    halign: 'center'
    padding_y: (self.height - self.font_size) / 2.1
    font_size: 60
    bold: True
    input_type: 'number'
    background_color: (186/255,225/255,255/255)
    background_normal: ''
    foreground_color: (1, 1, 1, 1)

<AppScreenManager>:

    HomeScreen:
        name: "home_screen"

    SettingsScreen:
        name: "settings_screen"

    DiningDollarScreen:
        name: "dining_dollar_screen"

<HomeScreen>:
    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'vertical'

            Label:
                id: display
                text: "Welcome"
                font_size: 30
                halign: 'center'
                text_size: (self.width, None)
                bold: True
                background_color: (149/255,146/255,182/255,1)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        size: self.size
                        pos: self.pos
                

            BoxLayout:
                orientation: 'vertical'

                BoxLayout:
                    orientation: 'horizontal'

                    CustomButton:
                        text: 'Meal Swipe'
                        background_color: (184/255,224/255,210/255,1)
                        on_release: root.meal_swipe()

                    CustomButton:
                        text: 'Dining Dollars'
                        background_color: (214/255,234/255,223/255,1)
                        on_release: 
                            root.manager.transition.direction = "down"
                            app.root.current = 'dining_dollar_screen'

                BoxLayout:
                    orientation: 'horizontal'

                    CustomButton:
                        text: 'Progress Week'
                        background_color: (128/255,155/255,206/255,1)
                        on_release: root.progress_week()

                    CustomButton:
                        text: 'Settings'
                        background_color: (149/255,184/255,209/255,1)
                        on_release: 
                            root.manager.transition.direction = "up"
                            app.root.current = 'settings_screen'        

<SettingsScreen>:
    BoxLayout:
        orientation: 'vertical'
            
        CustomInput:
            id: week_total
            hint_text: "Total weeks"
            input_filter: "int"
            on_text_validate: update_weeks_remaining()
        CustomInput:
            id: week_current
            hint_text: "Current week"
            input_filter: "int"
            on_text_validate: update_weeks_remaining()
        CustomInput:
            id: dollars_total
            hint_text: "Total dollars"
            input_filter: "float"
        CustomInput:
            id: dollars_remaining
            hint_text: "Remaining dollars"
            input_filter: "float"
        CustomInput:
            id: weekly_max
            hint_text: "Weekly allowance"
            input_filter: "float"
        CustomInput:
            id: weekly_remaining
            hint_text: "Weekly remaining "
            input_filter: "float"
        CustomInput:
            id: swipes_max
            hint_text: "Swipes per week"
            input_filter: "int"
        CustomInput:
            id: swipes_remaining
            hint_text: "Swipes left"
            input_filter: "int"

        CustomButton:
            text: 'Save'
            background_color: (149/255,184/255,209/255,1)
            on_release: 
                root.apply_settings()
                root.manager.transition.direction = "down"
                app.root.current = 'home_screen'

<DiningDollarScreen>:
    BoxLayout:
        orientation: 'vertical'

        CustomInput:
            id: input
            hint_text: "Enter price here"
            input_filter: "float"

        BoxLayout:
            orientation: 'vertical'

            CustomButton:
                text: 'Spend'
                background_color: (168/255,230/255,207/255)
                on_release: 
                    root.spend_dining_dollars()
                    root.ids.input.text = ''
                    app.root.current = 'home_screen'
            
            CustomButton:
                text: 'Cancel'
                background_color: (255/255,139/255,148/255)
                on_release: 
                    root.manager.transition.direction = "up"
                    app.root.current = 'home_screen'